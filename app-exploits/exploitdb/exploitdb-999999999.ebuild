EAPI=8

DESCRIPTION="All exploits from exploit-db.com"
HOMEPAGE="https://www.exploit-db.com/"

if [[ ${PV} == *9999* ]]; then
	EGIT_REPO_URI="https://gitlab.com/exploit-database/exploitdb.git"
	inherit git-r3
	KEYWORDS="~amd64 ~arm ~arm64 ~hppa ~loong ~ppc ~ppc64 ~riscv ~sparc ~x86"
else
	SRC_URI="SRC"
	KEYWORDS="~amd64 ~arm ~arm64 ~hppa ~loong ~ppc ~ppc64 ~riscv ~sparc ~x86"
fi

SLOT="0"
IUSE="doc"

DEPEND=""
RDEPEND="${DEPEND}"
BDEPEND=""

PATCHES=( "${FILESDIR}"/disable-update2.patch )

src_install() {
	insinto "/opt/${PN}"
	doins -r *
	doins -r .searchsploit_rc

	fperms +x "/opt/${PN}/searchsploit"
	dosym "../../opt/${PN}/searchsploit" "/usr/bin/searchsploit"
}
